@if (!empty($CategoryList) && $CategoryList->count() > 0)
    @foreach ($CategoryList as $category)
        @php
            $categoryImage = getFrontendAsset('images/default_tips_image.jpg');
            if ($category->getData('be_an_esafe_kid_image')) {
                $categoryImage = PP($category->getData('be_an_esafe_kid_image'));
            }

            $x=$loop->index+1;

            if($x%4 == 0)
                $stage_color = '#BB4EF1';
            elseif($x%3 == 0)
                $stage_color = '#00B9FF';
            else if($x%2 == 0 )
                $stage_color = '#34E497'; 
            else
                $stage_color = '#fa0'; 

            $category_article_slug = $category->getEsafePost();

        @endphp

        <div class="stage stage-1">
            @if($category_article_slug)
            <a href="{{asset($lang.'/be-an-esafe-kid/'.$category_article_slug)}}">
            @else
            <a href="#">
            @endif    

                <div class="no_">
                    <h2><?php echo sprintf('%02d', $loop->index + 1); ?></h2>
                </div>

                <svg preserveAspectRatio="xMinYMin" class="svg-solid" id="stage_{{ ($loop->index + 1) }}" width="451.17" height="324.216"
                    viewBox="0 0 451.17 324.216">
                    <path data-name="Path 11"
                        d="M308.478,168.915c-21.654,3.051-43.245,11.594-58.047,27.692-17.231,18.735-23.208,44.991-27.292,70.116a777.084,777.084,0,0,0-9.249,89.114c-1.527,33.391.3,70.134,22.641,94.994,19.079,21.231,49.516,28.93,78.049,28.048s56.237-9.138,84.194-14.89a485.158,485.158,0,0,1,132.834-8.654c19.573,1.425,39.222,4.041,58.745,2.055s39.394-9.208,52.094-24.168c11.982-14.113,16.13-33.16,18.609-51.507a403.107,403.107,0,0,0-6.546-143.59c-3.711-16.2-8.513-32.369-16.989-46.669s-20.974-26.711-36.565-32.48c-16.536-6.122-34.81-4.35-52.348-2.5-43.157,0-88.364,9.348-131.316,13.891C380.5,174.264,345.279,163.727,308.478,168.915Z"
                        transform="translate(-213.484 -154.732)" fill="{{$stage_color}}" opacity="0.89" />
                </svg>

                <svg class="svg-border" id="Layer_1" x="0px" y="0px" viewBox="245 -151.5 463 351"
                    style="enable-background:new 245 -151.5 463 351;" xml:space="preserve">
                    <g id="Group_5" transform="translate(52.416) rotate(8)">
                        <path id="Path_10" d="M301.5,153.4c-21.3,0-40.4-5.7-54.8-16.6c-27.6-21-36.2-57.5-40.9-90.5c-4.3-29.7-6.8-59.6-7.7-89.5
      c-0.7-26.2,0.5-53.4,14-75.3c13.6-22,36.3-33.4,53-39.1c18.6-6.3,37.7-8.4,56.3-10.3c16.8-1.8,34.2-3.6,50.9-8.7
      c13.7-4.1,27.8-8.9,41.4-13.6c27.9-9.5,56.7-19.3,85.2-24.8c16-4.9,34.4-10.4,52.7-7.4c15.6,2.6,30.9,11.8,43.3,25.8
      c12,13.6,20.1,30.3,25.8,43.2c19.6,44.5,31,92.1,33.6,140.6c1,17.9,0.7,38.4-8.9,55.3c-8.9,15.7-25.9,28-47.9,34.6
      c-15.2,4.5-31.1,6.2-46.5,7.8c-4,0.4-8,0.8-12,1.3c-44.1,5.1-87.2,16.3-128.2,33.3c-6.7,2.8-13.4,5.7-19.9,8.6
      c-19.3,8.5-39.3,17.3-60.4,22C320.9,152.2,311.2,153.3,301.5,153.4z M266.5-153.3c-16,5.5-37.7,16.3-50.6,37.2
      c-12.9,20.8-14,47.3-13.3,72.7c0.8,29.8,3.4,59.5,7.6,89c4.6,32.1,12.9,67.6,39.2,87.6c19.6,14.9,48.8,19.5,80.1,12.5
      c20.6-4.6,40.4-13.3,59.5-21.7c6.5-2.9,13.3-5.8,20-8.6c41.4-17.1,85-28.4,129.5-33.6c4-0.5,8-0.9,12-1.3
      c15.2-1.6,30.9-3.2,45.7-7.6c20.9-6.2,37-17.8,45.3-32.5c9-15.9,9.3-35.6,8.3-52.8c-2.6-48-13.8-95.1-33.2-139
      c-5.6-12.7-13.5-28.9-25.1-42.1c-11.7-13.2-26.2-21.9-40.7-24.3c-17.2-2.9-35.1,2.5-50.9,7.3c-28.4,5.4-57.1,15.2-84.8,24.7
      c-13.7,4.7-27.8,9.5-41.5,13.6c-17.2,5.2-34.8,7.1-51.8,8.9C303.5-161.5,284.6-159.5,266.5-153.3L266.5-153.3z" />
                    </g>
                </svg>

                <div class="img-wrapper">
                    <div class="img_" style="background-image: url({{ $categoryImage }});"></div>
                </div>
                <div class="text-box">
                    <p>{{ $category->getData('post_title') }}</p>
                </div>

                @if (!$loop->last)
                    <div class="connecters">
                        <svg preserveAspectRatio="xMinYMin" xmlns="http://www.w3.org/2000/svg" width="117.491"
                            height="138.288" viewBox="0 0 117.491 138.288">
                            <g id="Group_13" data-name="Group 13" transform="translate(97.865 -21.662) rotate(71)">
                                <g id="Group_12" data-name="Group 12">
                                    <g id="Group_9" data-name="Group 9">
                                        <path id="Path_18" data-name="Path 18"
                                            d="M6.095,101.938c-2.572.466-4.105.691-4.121.693" fill="none" stroke="#000"
                                            stroke-miterlimit="10" stroke-width="3" />
                                    </g>
                                    <g id="Group_10" data-name="Group 10">
                                        <path id="Path_19" data-name="Path 19"
                                            d="M133.288,69.179c-2.4,1.66-4.8,3.243-7.146,4.7M118.748,78.2c-2.589,1.406-5.167,2.691-7.666,3.821M103.123,85.2c-1.026.355-2.051.688-3.048.988-1.757.531-3.508.988-5.208,1.362M75.127,45.706a32.38,32.38,0,0,1,2.35,5.67l.006.021c.245.81.449,1.628.608,2.434m8.272,34.957a45.348,45.348,0,0,1-8.6-.223m.368-26.081a23.267,23.267,0,0,1-3.326,8M64.624,32.127a44.957,44.957,0,0,1,3.58,3.7c.777.891,1.518,1.79,2.205,2.67M48.817,29.018a8.158,8.158,0,0,1,3.074-1.751,8.88,8.88,0,0,1,5.406.2M69.178,77.033a53.274,53.274,0,0,1-6.419,5m6.617,4.508a35.135,35.135,0,0,1-7.668-3.962M43.52,45.215A33.724,33.724,0,0,1,44.6,36.638m10.62,40.255a41.857,41.857,0,0,1-5.074-6.968m-3.636-7.808a50.892,50.892,0,0,1-2.23-8.318M54.94,86.61c-2.408,1.24-5.025,2.457-7.776,3.615m-7.995,3.083c-2.573.91-5.292,1.8-8.078,2.639m-8.3,2.318c-2.714.7-5.512,1.369-8.316,1.987"
                                            fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="3" />
                                    </g>
                                </g>
                            </g>
                        </svg>

                    </div>
                @endif
            </a>
        </div>
    @endforeach
@endif
